# =============================
# Runtime
# =============================
APP_ENV=development
APP_DEBUG=true

# =============================
# Frontend
# =============================
NEXT_PUBLIC_API_BASE_URL=
NEXT_PUBLIC_WS_BASE_URL=ws://localhost/ws/market/overview
NEXT_PUBLIC_INTRADAY_WS_BASE_URL=ws://localhost/ws/market/intraday
NEXT_PUBLIC_MMAP_REFRESH_INTERVAL_MS=2000
NEXT_PUBLIC_INTRADAY_REFRESH_INTERVAL_MS=2000
NEXT_PUBLIC_WATCHLIST_REFRESH_INTERVAL_MS=2000
NEXT_PUBLIC_ALERTS_POLL_INTERVAL_MS=2000

# =============================
# Backend
# =============================
CORS_ORIGINS=["http://localhost:3000","http://localhost"]
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/openbloom
REDIS_URL=redis://localhost:6379/0

# =============================
# Market cache/stream tuning
# =============================
# UI cache: frequent refresh for terminal feel
MARKET_CACHE_TTL_SECONDS=2
# Upstream fetch interval: protects free providers from over-querying
MARKET_UPSTREAM_REFRESH_SECONDS=8
MARKET_STALE_TTL_SECONDS=300
MARKET_LKG_TTL_SECONDS=604800
MARKET_WS_INTERVAL_SECONDS=2
MARKET_BOOTSTRAP_ENABLED=true
MARKET_RATES_DEFAULTS_ENABLED=true
INTRADAY_RATE_LIMIT_PER_MINUTE=40
WATCHLIST_MAX_ITEMS=40
ALERTS_DEFAULT_COOLDOWN_SECONDS=60
ALERTS_TRIGGER_DISPLAY_SECONDS=120

# Provider circuit-breaker / cooldown
PROVIDER_FAILURE_THRESHOLD=3
PROVIDER_COOLDOWN_SECONDS=180
YAHOO_FAILURE_THRESHOLD=2
YAHOO_COOLDOWN_SECONDS=300

# =============================
# Yahoo Finance (primary)
# =============================
YAHOO_TIMEOUT_SECONDS=8
YAHOO_MAX_RETRIES=2
YAHOO_RATE_LIMIT_PER_MINUTE=40
YAHOO_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36
YAHOO_ACCEPT_LANGUAGE=en-US,en;q=0.9
YAHOO_ENDPOINTS=["https://query1.finance.yahoo.com/v7/finance/quote","https://query2.finance.yahoo.com/v7/finance/quote"]

# =============================
# Stooq fallback (indices/fx/commodities)
# =============================
STOOQ_TIMEOUT_SECONDS=8
STOOQ_RATE_LIMIT_PER_MINUTE=30

# =============================
# FX fallback mapping providers
# =============================
FX_TIMEOUT_SECONDS=8
FX_RATE_LIMIT_PER_MINUTE=30

# =============================
# CoinGecko fallback (crypto)
# =============================
COINGECKO_TIMEOUT_SECONDS=8
COINGECKO_RATE_LIMIT_PER_MINUTE=20

# =============================
# FRED (optional + public fallback)
# =============================
FRED_API_KEY=
FRED_TIMEOUT_SECONDS=8
FRED_PUBLIC_TIMEOUT_SECONDS=8
FRED_RATE_LIMIT_PER_MINUTE=30

# =============================
# Other providers (future modules)
# =============================
ALPHA_VANTAGE_API_KEY=
FINNHUB_API_KEY=
POLYGON_API_KEY=
NEWS_API_KEY=
SEC_USER_AGENT=openbloom/0.1 (support@example.com)
